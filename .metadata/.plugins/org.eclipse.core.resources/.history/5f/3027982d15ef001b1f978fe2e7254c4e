package capitaBank;

import java.util.ArrayList;
import java.util.List;

public class AccountController {
	private List<Customer> customers = new ArrayList<>();
    private List<Account> accounts = new ArrayList<>();
    private AccountType accountType;
    private Customer cust;
   
    public AccountController() {
    	
    }
//    public Customer createCustomer(String firstName, String lastName, String accountType) {
//    	Customer c = new Customer(firstName, lastName, accountType );
//    	customers.add(c);
//    	return null;
//    }
    
    public Account createAccount(Customer customer, AccountType a) {
    	userDao d = new userDao();
    	
    	if(a == accountType.CHECKING) {
    		CheckingAccount acc = new CheckingAccount();
    		accounts.add(acc);
    		customer.addAccount(acc);
    		d.insertUser(acc.getAccountId(),customer.getFirstName(), customer.getLastName(),0.0, "CHECKING");
    		return acc;
    	} else if(a == accountType.SAVINGS) {
    		SavingAccount s = new SavingAccount();
    		accounts.add(s);
    		customer.addAccount(s);
    		d.insertUser(s.getAccountId(),customer.getFirstName(), customer.getLastName(), 0.0, "SAVINGS");
    		return s;
    	}
    	return null;
    }
    
    
    
    public Account createAccounts(Customer c, AccountType a) {
    	userDao d = new userDao();
    	
    	if(a == accountType.CHECKING) {
    		CheckingAccount acc = new CheckingAccount();
    		accounts.add(acc);
    		c.addAccount(acc);
    		
    		return acc;
    	} else if(a == accountType.SAVINGS) {
    		SavingAccount s = new SavingAccount();
    		accounts.add(s);
    		c.addAccount(s);
    		
    		return s;
    	}
    	return null;
    }
    
    
    public void getAccount() {
    	for(Account i:accounts) {
    		System.out.println(i);
    	}
    }
    
    
    public void removeAccount(Account a) {
    	accounts.remove(a);
    	for(Customer i:customers) {
    		cust = i;
    		cust.removeAccount(a);
    	}
    }
    
    public void removeCustomer(Customer c) {
    	customers.remove(c);
    	List<Account> list = c.getAccount();
    	for(Account i:list) {
    		if(accounts.contains(i)) {
    			accounts.remove(i);
    		}
    	}
    	userDao d = new userDao();
    	d.deleteUser(c.getFirstName());
    }
}
